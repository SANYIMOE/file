<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <title>proxy</title>
        <style>
            html{
                height: 100%;
                width: 100%;
            }
            iframe{
                position: absolute;
                top: 0;
                left: 0;
                height: 100%;
                width: 100%;
                border: none;
            }
        </style>
    </head>
    <body>
        <iframe id="page" src=""></iframe>
        <script>
            const Page=`https://aqpc.tjdonglixs.cn/`;
            document.getElementById("page").src=Page+location.hash.slice(1);
            top.postMessage(location.pathname+location.search+location.hash, "*");
            top.postMessage("title "+document.title, "*");
            window.addEventListener("load",()=>{
                window.addEventListener("message",(e)=>{
                    console.log(e.data);
                    window.history.pushState({},0,location.origin+'#'+e.data);
                });
            });
            const changeFavicon = link => {
                let $favicon = document.querySelector('link[rel="icon"]');
                // If a <link rel="icon"> element already exists,
                // change its href to the given link.
                if ($favicon !== null) {
                    $favicon.href = link;
                    // Otherwise, create a new element and append it to <head>.
                } else {
                    $favicon = document.createElement("link");
                    $favicon.rel = "icon";
                    $favicon.href = link;
                    document.head.appendChild($favicon);
                }
            };
            let icon = 'https://aqpc.tjdonglixs.cn/favicon.ico'; // 图片地址
            changeFavicon(icon); // 动态修改网站图标
            let title = '仓储部安全排查论坛'; // 网站标题
            document.title = title; // 动态修改网站标题
        </script>
    </body>
</html>
